<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<ul> 
	  <li> index = 0 </li> 
	  <li> index = 1 </li> 
	  <li> index = 2 </li> 
	  <li> index = 3 </li>
	</ul>
 <script type="text/javascript"> 
			// 分别写成i和j只是为了区分，也可以写一样
			window.onload = function () {
				var oLi = document.getElementsByTagName("li");
				for(var i = 0; i < oLi.length; i++) {
					oLi[i].onclick = (function (j) {
						// 闭包保存i引用
						return function() {
							console.log(j);
						};
					})(i); // 立即执行函数表达式IIFE
				}
			}

			// ES5 
			window.onload = function() {
				var oLi = document.getElementsByTagName("li");
				for(var i = 0; i < oLi.length; i++) {
					// 挺好理解，就是立即执行函数表达式IIFE模拟块级作用域
					(function(j){
						oLi[j].onclick = function () {
							console.log(j);
						}
					})(i);
				}
			};

			// ES6
			window.onload = function() {
				var oLi = document.getElementsByTagName("li");
				for (let i = 0; i < oLi.length; i++) {
					oLi[i].onclick = function() {
						console.log(i);
					};
				}
			}
</script>
</body>
</html>